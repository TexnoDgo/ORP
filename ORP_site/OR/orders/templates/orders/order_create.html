{% extends "HomePage/base.html" %}
{% load i18n %}
{% load crispy_forms_tags %}
{% load static %}
{% block title %}{% trans "Create Order" %}{% endblock %}

{% block content %}


<link rel="stylesheet" href="{% static 'orders/style.css' %}">

    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'index' %}">Главная</a></li>
                <li class="breadcrumb-item active" aria-current="page">Создать заказ</li>
            </ol>
        </nav>
        <legend class="border-bottom mb-4">{% trans "СОЗДАТЬ ЗАКАЗ" %}</legend>
            <form class="text-left" method="POST" enctype="multipart/form-data">
                <div class="container">
                    <div class="content-section">
                        {% csrf_token %}
                            <div class="form-title">
                                {{ order_form.title|as_crispy_field}}
                                <small>Введите заголовок заказа. Например: Изготовить токарную детать, выполнить токарную обработку</small>
                            </div>
                            <hr>

                            <div class="form-description">
                                {{ order_form.description|as_crispy_field}}
                                <small>Опишите подробно работу которую необходимо выполнить.</small>
                            </div>
                            <hr>

                            <div class="form-files">
                                <small></small>
                            </div>


                            <div class="form-amount">
                                {{ order_form.amount|as_crispy_field}}
                                <small>Укажите количество изделий.</small>
                            </div>
                            <hr>

                            <div class="form-city">
                                {{ order_form.city|as_crispy_field}}
                                <small>Выберите город в который отправится заказ</small>
                            </div>
                            <hr>

                            <table>
                                <tr>
                                    <td>
                                        <div class="form-image" id="order-image">

                                            <small>Выберите обложку заказка</small>

                                            <input type="file" name="image_view" onchange="loadFile(event)">

                                            <img id="output"/>
                                            <script>
                                              var loadFile = function(event) {
                                                var output = document.getElementById('output');
                                                output.src = URL.createObjectURL(event.target.files[0]);
                                                output.onload = function() {
                                                  URL.revokeObjectURL(output.src) // free memory
                                                }
                                              };
                                            </script>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-files">
                                            {{ order_form.files|as_crispy_field}}
                                            <small>Выберите Чертеж</small>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-files">
                                            {{ order_form.files|as_crispy_field}}
                                            <small>Выберите файлы.</small>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="form-files">
                                            {{ order_form.files|as_crispy_field}}
                                            <small>Выберите файлы.</small>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                            <hr>

                            <div class="form-lead_time">
                                {{ order_form.lead_time|as_crispy_field}}
                                <small>Установите сроки выполнения работ.</small>
                            </div>
                            <hr>

                            <div class="form-proposed_budget">
                                {{ order_form.proposed_budget|as_crispy_field}}
                                <small>Укажите предположительный бюджет.</small>
                            </div>
                            <hr>

                            <div class="form-categories">
                                {{ order_form.categories|as_crispy_field}}
                                <small>Выберите категории под которые подпадает ваш заказ.</small>
                            </div>

                            <hr>
                            <button class="btn btn-lg btn-primary btn-block" type="submit">{% trans "CREATE" %}</button>
                            <hr>
                    </div>
                </div>
            </form>
    </div>
{% endblock %}

